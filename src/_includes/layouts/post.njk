---
layout: layouts/base.njk
---

<article class="post" itemscope itemtype="https://schema.org/Article">

  <!-- POST HERO -->
  <div class="post-hero">
    {% if cover_image %}
    <div class="post-hero__media">
      <img
        src="{{ cover_image }}"
        alt="{{ cover_image_alt if cover_image_alt else title }}"
        class="post-hero__img"
        loading="eager"
        itemprop="image"
      />
    </div>
    {% endif %}
    <div class="post-hero__overlay"></div>
    <div class="post-hero__content">
      {% if region %}
      <p class="post-eyebrow">{{ region }}</p>
      {% endif %}
      <h1 class="post-title" itemprop="headline">{{ title }}</h1>
      <time class="post-date" datetime="{{ date | htmlDateString }}" itemprop="datePublished">
        {{ date | readableDate }}
      </time>
    </div>
  </div>

  <!-- POST BODY -->
  <div class="post-body">

    {% if excerpt %}
    <p class="post-lead">{{ excerpt }}</p>
    {% endif %}

    <div class="post-content" itemprop="articleBody">
      {{ content | safe }}
    </div>

  </div>

  <!-- BACK LINK -->
  <div class="post-footer">
    <a href="/journal/" class="post-back-link">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path d="M19 12H5M5 12l7 7M5 12l7-7"/></svg>
      Back to Journal
    </a>
  </div>

</article>

<!-- MORE POSTS -->
{% set allPosts = collections.journal %}
{% set otherPosts = [] %}
{% for p in allPosts %}
  {% if p.url !== page.url %}
    {% set otherPosts = (otherPosts.push(p), otherPosts) %}
  {% endif %}
{% endfor %}

{% if otherPosts.length > 0 %}
<section class="more-posts">
  <div class="more-posts__inner">
    <h2 class="more-posts__heading">More Stories</h2>
    <div class="cards-grid cards-grid--three">
      {% for post in otherPosts | limit(3) %}
      <a href="{{ post.url }}" class="card">
        {% if post.data.cover_image %}
        <div class="card__media">
          <img
            src="{{ post.data.cover_image }}"
            alt="{{ post.data.cover_image_alt if post.data.cover_image_alt else post.data.title }}"
            loading="lazy"
          />
        </div>
        {% endif %}
        <div class="card__body">
          {% if post.data.region %}<span class="card__region">{{ post.data.region }}</span>{% endif %}
          <h3 class="card__title">{{ post.data.title }}</h3>
        </div>
      </a>
      {% endfor %}
    </div>
  </div>
</section>
{% endif %}
